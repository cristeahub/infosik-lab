\section{Answers to questions}

\paragraph{}
\textbf{Q1:}
\textit{How does the .p12 file work? Explain what this file is and its relationship to the NTNU CA.}

The .p12-file is an archive file format containing a bundle of cryptography objects, defined by the PKCS\#12 RFC\cite{pkcs-12}.
It may contain x.509 public-key certificates\cite{x509}, encrypted private keys, and certificate revocation lists, and more.
When imported into a web-browser like Mozilla Firefox, it can be used for establishing identity against servers requiring it.
Its relation to the NTNU CA is that the validity of the public key certificate contained within is guaranteed by a chain of CA's signing each others certificates, with the NTNU CA at the root.
Therefore, the public key certificate is only valid for entities having accepted the NTNU CA as their lord and saviour.

\paragraph{}
\textbf{Q2:}
\cprotect\textit{Explain what the string \verb/TLS_DHE_RSA_WITH_AES_128_CBC_SHA/ means in Figure 4. Comment on security related issues regarding the cryptographic algorithms used to generate and sign your group's web server certificate (key lengths, algorithms, etc.).}

\paragraph{}
\textbf{Q3:}
\textit{List and explain the verifications. What is the difference between the two files? Who has signed the Apache release? What is the point of this process?}

\paragraph{}
\textbf{Q4:}
\textit{What is the purpose of a certificate chain? Describe, on a high-level, the steps that your browser takes when verifying the authenticity of a web page served over HTTPS.}

Certificate chains are needed to verify that the public key, and other data, of a certificate is correct.
The browser verifies the authenticity of a host by looking at the signature of each certificate in the chain, and verifying it with the next certificate, until it reaches a known and trusted certificate â€“ a root CA.\cite{x509}

\paragraph{}
\textbf{Q5:}
\textit{Web servers offering weak cryptography are subject to several attacks. List 3 feasible attacks and explain them briefly. How did you configure your server to prevent such attacks?}

\begin{itemize}
    \item
        FREAK (Factoring Attack on RSA-EXPORT Keys)\cite{freak-ssl-tls}.
        A client using a vulnerable version of OpenSSL coupled with a server offering export-grade cryptography is exposed to a RSA-to-EXPORT\_RSA downgrade attack.
        The sesion key can then be brute-forced due to the shorter key length of EXPORT\_RSA.

\end{itemize}

All of these attacks are prevented by only allowing strong cipher suites in Apache.

\paragraph{}
\textbf{Q6:}
\cprotect\textit{Cookies can be a potential security risk if not handled properly, especially if they contain sensitive information. Two important flags can be set on cookies: \verb/HTTP-Only/ and \verb/secure/. What does the \verb/HTTP-Only/ flag do and how does it work? What does the \verb/secure/ flag do and how does it work?}

The \verb/HTTP-Only/ flag makes sure the cookie cannot be accessed from JavaScript. This stops malicious scripts from being able to obtain cookies from websites.

The \verb/secure/ flag ensures the cookie will only be transmitted to the server on HTTPS requests.

\paragraph{}
\textbf{Q7:}
\textit{What kind of malicious attacks is your web application (PHP) vulnerable to? Describe four briefly, and point out what countermeasures you have developed in your code to prevent such attacks.}

\textbf{SQL injections.} We make sure to use only prepared statements when interfacing the database.
\textbf{XSS}. All user input is escaped before being stored in the database.
\textbf{CSRF}. All forms contain a CSRF token.
\textbf{Cookies shared with other sites on the same domain}. No way to prevent this, because cookies cannot be restricted to only one port on the server.
The easiest way to fix this would be to use a custom domain for our site.
Another way would be using something other than cookies for storing session IDs, for instance JSON Web Tokens.

\paragraph{}
\textbf{Q8:}
\textit{Explain how you have stored the passwords of your users in your database. Why have you stored them like this? Why is it not a good idea to just store a users password as it is?}

The users' passwords have been hashed with \verb/BCRYPT/.
It is better than SHA1 which is still widely used, blah blah.
If they were stored in plaintext, they would be readable by us and anyone who gains access to the database.
